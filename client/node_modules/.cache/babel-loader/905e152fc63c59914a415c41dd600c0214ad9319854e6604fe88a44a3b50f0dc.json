{"ast":null,"code":"const handleSubmit = async event => {\n  event.preventDefault();\n  const loginData = {\n    email: event.target.email.value,\n    password: event.target.password.value,\n    role: event.target.role.value\n  };\n  try {\n    const res = await axios.post('http://127.0.0.1:5000/api/user/login', loginData);\n    console.log('Response from server:', res); // Log the entire response\n    if (res.data.success) {\n      toast.success(res.data.message);\n      localStorage.setItem('token', res.data.token);\n      localStorage.setItem('role', res.data.role);\n      localStorage.setItem('userId', res.data.UserId); // Store the UserId in localStorage\n      toast(\"Redirecting to Dashboard\");\n      if (res.data.role === 'doctor') {\n        navigate(`/doctor`);\n      } else if (res.data.role === 'patient') {\n        navigate(`/patient`);\n      }\n    } else {\n      toast.error(res.data.message);\n    }\n  } catch (error) {\n    console.error('Error during login:', error); // More detailed logging\n    toast.error(\"Login failed\");\n  }\n};","map":{"version":3,"names":["handleSubmit","event","preventDefault","loginData","email","target","value","password","role","res","axios","post","console","log","data","success","toast","message","localStorage","setItem","token","UserId","navigate","error"],"sources":["C:/Users/Sujit Solav/Desktop/MERN Projects/DoctorAppointment/client/src/pages/Login.js"],"sourcesContent":["const handleSubmit = async (event) => {\r\n  event.preventDefault();\r\n  const loginData = {\r\n    email: event.target.email.value,\r\n    password: event.target.password.value,\r\n    role: event.target.role.value,\r\n  };\r\n  \r\n  try {\r\n    const res = await axios.post('http://127.0.0.1:5000/api/user/login', loginData);\r\n    console.log('Response from server:', res); // Log the entire response\r\n    if (res.data.success) {\r\n      toast.success(res.data.message);\r\n      localStorage.setItem('token', res.data.token);\r\n      localStorage.setItem('role', res.data.role);\r\n      localStorage.setItem('userId', res.data.UserId);  // Store the UserId in localStorage\r\n      toast(\"Redirecting to Dashboard\");\r\n      if (res.data.role === 'doctor') {\r\n        navigate(`/doctor`);\r\n      } else if (res.data.role === 'patient') {\r\n        navigate(`/patient`);\r\n      }\r\n    } else {\r\n      toast.error(res.data.message);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error during login:', error); // More detailed logging\r\n    toast.error(\"Login failed\");\r\n  }\r\n};\r\n"],"mappings":"AAAA,MAAMA,YAAY,GAAG,MAAOC,KAAK,IAAK;EACpCA,KAAK,CAACC,cAAc,CAAC,CAAC;EACtB,MAAMC,SAAS,GAAG;IAChBC,KAAK,EAAEH,KAAK,CAACI,MAAM,CAACD,KAAK,CAACE,KAAK;IAC/BC,QAAQ,EAAEN,KAAK,CAACI,MAAM,CAACE,QAAQ,CAACD,KAAK;IACrCE,IAAI,EAAEP,KAAK,CAACI,MAAM,CAACG,IAAI,CAACF;EAC1B,CAAC;EAED,IAAI;IACF,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAACC,IAAI,CAAC,sCAAsC,EAAER,SAAS,CAAC;IAC/ES,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEJ,GAAG,CAAC,CAAC,CAAC;IAC3C,IAAIA,GAAG,CAACK,IAAI,CAACC,OAAO,EAAE;MACpBC,KAAK,CAACD,OAAO,CAACN,GAAG,CAACK,IAAI,CAACG,OAAO,CAAC;MAC/BC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEV,GAAG,CAACK,IAAI,CAACM,KAAK,CAAC;MAC7CF,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEV,GAAG,CAACK,IAAI,CAACN,IAAI,CAAC;MAC3CU,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEV,GAAG,CAACK,IAAI,CAACO,MAAM,CAAC,CAAC,CAAE;MAClDL,KAAK,CAAC,0BAA0B,CAAC;MACjC,IAAIP,GAAG,CAACK,IAAI,CAACN,IAAI,KAAK,QAAQ,EAAE;QAC9Bc,QAAQ,CAAC,SAAS,CAAC;MACrB,CAAC,MAAM,IAAIb,GAAG,CAACK,IAAI,CAACN,IAAI,KAAK,SAAS,EAAE;QACtCc,QAAQ,CAAC,UAAU,CAAC;MACtB;IACF,CAAC,MAAM;MACLN,KAAK,CAACO,KAAK,CAACd,GAAG,CAACK,IAAI,CAACG,OAAO,CAAC;IAC/B;EACF,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdX,OAAO,CAACW,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC,CAAC,CAAC;IAC7CP,KAAK,CAACO,KAAK,CAAC,cAAc,CAAC;EAC7B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}